<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-///mybatis.org//DTD Mapper 3.0//EN"
"Http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lion09.board.PostLikeMapper">

<select id="getPostlike" parameterType="com.lion09.board.PostLikeDTO"
	resultType="com.lion09.board.PostLikeDTO">
	select userId,postId,likeDate,likeState from postLike 
	where postId=#{postId}
</select>

<insert id="insertPostlike" parameterType="com.lion09.board.PostLikeDTO">
	insert into postLike (userId, postId, likeDate, likeState)
	values (#{userId},#{postId},current_timestamp, 1)
</insert>

<delete id="deletePostlike" parameterType="com.lion09.board.PostLikeDTO">
	delete postLike where postId=#{postId}
</delete>

<select id="findPostlikeState" parameterType="com.lion09.board.PostLikeDTO"
	resultType="int">
	select count(*) from postLike where userId=#{userId} and postId=#{postId}
</select>

<update id="updateLike" parameterType="int">
	update post set postLikeCount=postLikeCount+1 where postId=#{postId}
</update>

<update id="deleteLike" parameterType="int">
	update post set postLikeCount=postLikeCount-1 where postId=#{postId}
</update>

</mapper>