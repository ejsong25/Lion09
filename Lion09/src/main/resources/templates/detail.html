<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
 	<link rel="stylesheet" href="css/carrot_market.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <title>글 정보</title>
    <link rel="stylesheet" href="/css/list.css">
    <link href="css/templatemo-style.css" rel="stylesheet" />
    <link href="css/all.min.css" rel="stylesheet" />
    <link href="css/detail.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    
    <script type="text/javascript">
    
    <!-- 위시 하트 스크립트 -->
    
    function postLike1() {
        
    	f = document.likeForm;
    	var currentClass = $(this).attr('class');
        
       	$(this).attr('class', 'bi-heart-fill');
       	alert('관심목록에 추가되었습니다.')
       	f.action="/insertLike.action";
       	
        f.submit();
        
    }
    
    function postLike2() {
        
    	f = document.likeForm;
    	var currentClass = $(this).attr('class');
        
    	$(this).attr('class', 'bi-heart');
        alert('관심목록에서 삭제되었습니다.')
        f.action="/deleteLike.action";
        	
        f.submit();
        
    }
    
   <!-- 참여하기 스크립트 -->
    
    function order1() {
        
    	f = document.orderForm;
    	var currentClass = $(this).attr('class');
        
       	$(this).attr('class', 'joinButton1');
       	alert('참여 되었습니다.')
       	f.action="/insertOrder.action";
       	
        f.submit();
        
    }
    
    function order2() {
        
    	f = document.orderForm;
    	var currentClass = $(this).attr('class');
        
    	$(this).attr('class', 'joinButton2');
        alert('참여 취소되었습니다.')
        f.action="/deleteOrder.action";
        	
        f.submit();
        
    }
    
    
    
    </script>
	
</head>

<style>
@font-face {
    font-family: 'ONE-Mobile-POP';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/ONE-Mobile-POP.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'omyu_pretty';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-01@1.0/omyu_pretty.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}
</style>

<body> 
<!-- 네비바 자리 -->
	<div th:replace="layout :: navbar"></div>
	<div class="container">
	<!-- Top box -->
		<!-- Logo & Site Name -->
		<div class="placeholder">	
			<div class="parallax-window" data-parallax="scroll">
				<img src="img/bg.jpeg" style="width: 100%;">
				<div class="tm-header">
					<div class="row tm-header-inner">
						<div class="col-md-6 col-12">
							<div class="tm-site-text-box">
								<h1 class="tm-site-title">글 정보</h1>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

    <div>
	 	<div class="user-info"><br/>
	        <div class="header__title">
	             <h1>&nbsp;[[${dto.title }]]</h1>
	        </div>
        </div><br/>
              
       <div class="profileBox2">     
      			<img class="profileImg" id="profileImage" 
						th:src="@{'/img/mypage/' + ${mdto.profileImgName}}" >
		</div>						
        <div style=" float: left ;">
         	<p style="font-size: 20px;" th:text="${mdto.nickName}">&nbsp;&nbsp;${dto.nickName}</p>
            <p th:text="${dto.myAddr}">&nbsp;&nbsp;${dto.myAddr}</p></div>
     	
	        
        <div class="header__title" style="margin-left: 58%;">
               <img src="img/lion.png">
       	</div>
	              
	    <!-- 에너지 게이지 프로세스바 -->        
	  	<div style="margin-left: 58%; margin-top: 20px;position: static;">
	       	<h4 style="font-family: 'omyu_pretty'; font-size: 20pt;">에너지 게이지</h4>
	        <b style="font-family: 'omyu_pretty'; font-size: 15pt;">[[${mdto.energy}]]%</b>    		
	      <div class="progress" style="margin-top: 20px;">
			  <div class="progress-number" aria-valuenow="첫에너지 40%"></div>
			   <progress class="progressBar" th:value="${mdto.energy}" min="0" max="100"></progress>
		  </div>
      	</div>
              
        <div class="container1 column">
      	  
      	  <div class="post-box">
			
			<div id="slider-wrap">
			    <ul id="slider">
			       <li>
            			<img th:src="@{|/img/postimg/${dto.chooseFile}|}" alt="" class="block-box">
				   </li>
				   
				</ul>

			    <div class="slider-btns" id="next"><span>▶</span></div>
			    <div class="slider-btns" id="previous"><span>◀</span></div>

    			<div id="slider-pagination-wrap">
        		<ul></ul>
		    	</div>
			</div>
			      	  
            <div class="flex-box between info-button-box">                      

				<div class="flex-box button-box" style="margin-left: 66%;" 
					th:if="${mdto.userId == dto.userId}">
                    <button class="orange" th:onclick="@{|location.href='/writeUpdated?postId=${dto.postId}&${params}'|}">수정하기</button>
                    <button class="grey" th:onclick="@{|location.href='/deleted_ok.action?postId=${dto.postId}&${params}'|}">삭제하기</button>
                 
                  <button class="orange">채팅보기</button>
                </div>

                <div class="button-box" style="margin-left: 88%;"
                	th:if="${mdto.userId != dto.userId}">
                    <input type="button" class="orange" th:onclick="@{|location.href='/chat/room?postId=${dto.postId}'|}"
                    	value="채팅하기">
                </div>
                
                
            </div>
      	  	
            <hr class="line">
            
            <div class="post-info-box">
            
              <div class="flex-box between">
                <h3 th:text="${dto.title}">제목</h3>
                <h3 >[[${dto.productsPrice}]]원</h3>
              </div>
              <p th:text="${dto.contents}">내용</p>
              
              <div class="location-views-box flex-box between">
                  <span style="font-size: 15px;">조회수 : [[${dto.hitCount}]]</span>
                  <span style="color: red; font-size: 15px; margin-right: 80%;">관심 : [[${dto.postLikeCount}]]</span>
                
             	<!-- 하트(좋아요) -->
                <form action="" method="post" name="likeForm">
	                <i th:if="${likedto.likeState == 0}" class="bi-heart" style="font-size:2rem; color: red; cursor: pointer;"
					   onclick="postLike1();"></i>
					<i th:if="${likedto.likeState == 1}" class="bi-heart-fill" style="font-size:2rem; color: red; cursor: pointer;"
					   onclick="postLike2();"></i>
					<input type="hidden" th:value="${dto.postId}" name="postId">
                </form> 
                
              </div>
               
            </div>
           
        </div>
      </div>
    </div>
					<div style="font-family: 'omyu_pretty'; font-size: 20pt; margin-left: 80%;">					
				참여자 : [[${dto.participant}]] / 모집인원 : [[${dto.recruitment}]]</div>
	<!-- 참여인원  -->        
    <div class="submitButtons">
			<form action="" method="post" name="orderForm">
            
			<input type="button" th:if="${Odto.count == 0}" onclick="order1();" class="joinButton1" value="참여하기">
            <input type="button"  th:if="${Odto.count  == 1}"  onclick="order2();"  class="joinButton2" value="취소하기">
        	 <input type="hidden" th:value="${dto.postId}" name="postId">
        </form>
    </div>
	<br/><br/>

	<footer class="tm-footer text-center">
		<p>Copyright &copy; 2020 Simple House 
           
           | Design: <a rel="nofollow" href="https://templatemo.com">TemplateMo</a></p>
	</footer>
</div>
	
	<script src="js/detail.js"></script>    
	<script src="js/jquery.min.js"></script>
	<script src="js/parallax.min.js"></script>
	
	<script>
		<!-- 버튼 스크립트 -->
		$(document).ready(function(){
			// Handle click on paging links
			$('.tm-paging-link').click(function(e){
				e.preventDefault();
				
				var page = $(this).text().toLowerCase();
				$('.tm-gallery-page').addClass('hidden');
				$('#tm-gallery-page-' + page).removeClass('hidden');
				$('.tm-paging-link').removeClass('active');
				$(this).addClass("active");
			});
		});
	
   </script>
	
	
</body>
</html>